{
  "query": "-- Genealogy indexes\nCREATE INDEX IF NOT EXISTS idx_genealogy_upline ON genealogy(uplineId, level);\nCREATE INDEX IF NOT EXISTS idx_genealogy_distributor ON genealogy(distributorId);\nCREATE INDEX IF NOT EXISTS idx_genealogy_depth ON genealogy(level, createdAt);\n\n-- Commissions indexes\nCREATE INDEX IF NOT EXISTS idx_commissions_distributor_date ON commissions(distributorId, createdAt DESC);\nCREATE INDEX IF NOT EXISTS idx_commissions_status ON commissions(status, createdAt DESC);\nCREATE INDEX IF NOT EXISTS idx_commissions_type ON commissions(commissionType, distributorId);\n\n-- Distributors indexes\nCREATE INDEX IF NOT EXISTS idx_distributors_sponsor ON distributors(sponsorId, createdAt DESC);\nCREATE INDEX IF NOT EXISTS idx_distributors_rank ON distributors(currentRank, createdAt DESC);\nCREATE INDEX IF NOT EXISTS idx_distributors_user ON distributors(userId);\n\n-- Orders indexes\nCREATE INDEX IF NOT EXISTS idx_orders_customer ON orders(customerId, createdAt DESC);\nCREATE INDEX IF NOT EXISTS idx_orders_status ON orders(status, createdAt DESC);\nCREATE INDEX IF NOT EXISTS idx_orders_distributor ON orders(distributorId, createdAt DESC);\n\n-- Users indexes\nCREATE INDEX IF NOT EXISTS idx_users_email ON users(email);\nCREATE INDEX IF NOT EXISTS idx_users_username ON users(username);\nCREATE INDEX IF NOT EXISTS idx_users_openid ON users(openId);\n\n-- Referral tracking indexes\nCREATE INDEX IF NOT EXISTS idx_referral_distributor ON referralTracking(distributorId, createdAt DESC);\nCREATE INDEX IF NOT EXISTS idx_referral_customer ON referralTracking(customerId, createdAt DESC);\n\n-- Autoship indexes\nCREATE INDEX IF NOT EXISTS idx_autoship_customer ON autoship(customerId, status);\nCREATE INDEX IF NOT EXISTS idx_autoship_next_order ON autoship(nextOrderDate, status);\n\n-- Rank history indexes\nCREATE INDEX IF NOT EXISTS idx_rank_history_distributor ON rankHistory(distributorId, achievedAt DESC);\n\n-- Notifications indexes\nCREATE INDEX IF NOT EXISTS idx_notifications_user ON notifications(userId, createdAt DESC);\nCREATE INDEX IF NOT EXISTS idx_notifications_read ON notifications(isRead, createdAt DESC);",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user mexMZK3NDs3KsAz.root --database dR9ACUM3ZN4eERDeqzMEq8 --execute -- Genealogy indexes\nCREATE INDEX IF NOT EXISTS idx_genealogy_upline ON genealogy(uplineId, level);\nCREATE INDEX IF NOT EXISTS idx_genealogy_distributor ON genealogy(distributorId);\nCREATE INDEX IF NOT EXISTS idx_genealogy_depth ON genealogy(level, createdAt);\n\n-- Commissions indexes\nCREATE INDEX IF NOT EXISTS idx_commissions_distributor_date ON commissions(distributorId, createdAt DESC);\nCREATE INDEX IF NOT EXISTS idx_commissions_status ON commissions(status, createdAt DESC);\nCREATE INDEX IF NOT EXISTS idx_commissions_type ON commissions(commissionType, distributorId);\n\n-- Distributors indexes\nCREATE INDEX IF NOT EXISTS idx_distributors_sponsor ON distributors(sponsorId, createdAt DESC);\nCREATE INDEX IF NOT EXISTS idx_distributors_rank ON distributors(currentRank, createdAt DESC);\nCREATE INDEX IF NOT EXISTS idx_distributors_user ON distributors(userId);\n\n-- Orders indexes\nCREATE INDEX IF NOT EXISTS idx_orders_customer ON orders(customerId, createdAt DESC);\nCREATE INDEX IF NOT EXISTS idx_orders_status ON orders(status, createdAt DESC);\nCREATE INDEX IF NOT EXISTS idx_orders_distributor ON orders(distributorId, createdAt DESC);\n\n-- Users indexes\nCREATE INDEX IF NOT EXISTS idx_users_email ON users(email);\nCREATE INDEX IF NOT EXISTS idx_users_username ON users(username);\nCREATE INDEX IF NOT EXISTS idx_users_openid ON users(openId);\n\n-- Referral tracking indexes\nCREATE INDEX IF NOT EXISTS idx_referral_distributor ON referralTracking(distributorId, createdAt DESC);\nCREATE INDEX IF NOT EXISTS idx_referral_customer ON referralTracking(customerId, createdAt DESC);\n\n-- Autoship indexes\nCREATE INDEX IF NOT EXISTS idx_autoship_customer ON autoship(customerId, status);\nCREATE INDEX IF NOT EXISTS idx_autoship_next_order ON autoship(nextOrderDate, status);\n\n-- Rank history indexes\nCREATE INDEX IF NOT EXISTS idx_rank_history_distributor ON rankHistory(distributorId, achievedAt DESC);\n\n-- Notifications indexes\nCREATE INDEX IF NOT EXISTS idx_notifications_user ON notifications(userId, createdAt DESC);\nCREATE INDEX IF NOT EXISTS idx_notifications_read ON notifications(isRead, createdAt DESC);",
  "returncode": 1,
  "logs": [
    "ERROR 1146 (42S02) at line 2: Table 'dr9acum3zn4eerdeqzmeq8.genealogy' doesn't exist"
  ]
}