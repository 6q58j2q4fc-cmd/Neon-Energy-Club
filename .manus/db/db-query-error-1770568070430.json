{
  "query": "-- Binary tree positions indexes (MLM genealogy)\nCREATE INDEX IF NOT EXISTS idx_binary_tree_upline ON binary_tree_positions(uplineId, createdAt);\nCREATE INDEX IF NOT EXISTS idx_binary_tree_distributor ON binary_tree_positions(distributorId);\n\n-- Commissions indexes\nCREATE INDEX IF NOT EXISTS idx_commissions_distributor_date ON commissions(distributorId, createdAt);\nCREATE INDEX IF NOT EXISTS idx_commissions_status ON commissions(status, createdAt);\n\n-- Distributors indexes\nCREATE INDEX IF NOT EXISTS idx_distributors_sponsor ON distributors(sponsorId, createdAt);\nCREATE INDEX IF NOT EXISTS idx_distributors_rank ON distributors(currentRank, createdAt);\nCREATE INDEX IF NOT EXISTS idx_distributors_user ON distributors(userId);\n\n-- Orders indexes\nCREATE INDEX IF NOT EXISTS idx_orders_customer ON orders(customerId, createdAt);\nCREATE INDEX IF NOT EXISTS idx_orders_status ON orders(status, createdAt);\n\n-- Users indexes\nCREATE INDEX IF NOT EXISTS idx_users_email ON users(email);\nCREATE INDEX IF NOT EXISTS idx_users_username ON users(username);\nCREATE INDEX IF NOT EXISTS idx_users_openid ON users(openId);\n\n-- Referral tracking indexes\nCREATE INDEX IF NOT EXISTS idx_referral_distributor ON referral_tracking(distributorId, createdAt);\nCREATE INDEX IF NOT EXISTS idx_referral_customer ON referral_tracking(customerId, createdAt);\n\n-- Rank history indexes\nCREATE INDEX IF NOT EXISTS idx_rank_history_distributor ON rank_history(distributorId, achievedAt);\n\n-- Notifications indexes\nCREATE INDEX IF NOT EXISTS idx_notifications_user ON notifications(userId, createdAt);\nCREATE INDEX IF NOT EXISTS idx_notifications_read ON notifications(isRead, createdAt);",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user mexMZK3NDs3KsAz.root --database dR9ACUM3ZN4eERDeqzMEq8 --execute -- Binary tree positions indexes (MLM genealogy)\nCREATE INDEX IF NOT EXISTS idx_binary_tree_upline ON binary_tree_positions(uplineId, createdAt);\nCREATE INDEX IF NOT EXISTS idx_binary_tree_distributor ON binary_tree_positions(distributorId);\n\n-- Commissions indexes\nCREATE INDEX IF NOT EXISTS idx_commissions_distributor_date ON commissions(distributorId, createdAt);\nCREATE INDEX IF NOT EXISTS idx_commissions_status ON commissions(status, createdAt);\n\n-- Distributors indexes\nCREATE INDEX IF NOT EXISTS idx_distributors_sponsor ON distributors(sponsorId, createdAt);\nCREATE INDEX IF NOT EXISTS idx_distributors_rank ON distributors(currentRank, createdAt);\nCREATE INDEX IF NOT EXISTS idx_distributors_user ON distributors(userId);\n\n-- Orders indexes\nCREATE INDEX IF NOT EXISTS idx_orders_customer ON orders(customerId, createdAt);\nCREATE INDEX IF NOT EXISTS idx_orders_status ON orders(status, createdAt);\n\n-- Users indexes\nCREATE INDEX IF NOT EXISTS idx_users_email ON users(email);\nCREATE INDEX IF NOT EXISTS idx_users_username ON users(username);\nCREATE INDEX IF NOT EXISTS idx_users_openid ON users(openId);\n\n-- Referral tracking indexes\nCREATE INDEX IF NOT EXISTS idx_referral_distributor ON referral_tracking(distributorId, createdAt);\nCREATE INDEX IF NOT EXISTS idx_referral_customer ON referral_tracking(customerId, createdAt);\n\n-- Rank history indexes\nCREATE INDEX IF NOT EXISTS idx_rank_history_distributor ON rank_history(distributorId, achievedAt);\n\n-- Notifications indexes\nCREATE INDEX IF NOT EXISTS idx_notifications_user ON notifications(userId, createdAt);\nCREATE INDEX IF NOT EXISTS idx_notifications_read ON notifications(isRead, createdAt);",
  "returncode": 1,
  "logs": [
    "ERROR 1072 (42000) at line 2: column does not exist: uplineId"
  ]
}